<!doctype html><html lang=zh-tw dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Design Patterns - Decorator Pattern | ZhengWei Liu's blogs</title><meta name=keywords content="Design Patterns,Decorator Pattern,設計模式"><meta name=description content="Decorator Pattern 透過修改已定義的行為，以擴展或變更其功能，而不需透過繼承和覆寫。 使用組合 (composition) 替代繼承 (inherit)，可動態地添加或移除行為，且不需要在繼承關係中堆疊子類別。 Decorator模式更具靈活性和可維護性，因此被廣泛地應用於軟體開發領域中。"><meta name=author content="ZhengWei, Liu"><link rel=canonical href=https://blog.zhengweiliu.com/posts/design-pattern/decorator-pattern/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.29e0172bca6bbf5268898a52f3a885c467a617731b5b09d0b1a4dbe03dedcd11.css integrity="sha256-KeAXK8prv1JoiYpS86iFxGemF3MbWwnQsaTb4D3tzRE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.63521e69c4b617677029c36f8d313102e7b332fb1e281f8e0c4744b93deaeba1.js integrity="sha256-Y1IeacS2F2dwKcNvjTExAuezMvseKB+ODEdEuT3q66E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.zhengweiliu.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.zhengweiliu.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.zhengweiliu.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.zhengweiliu.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.zhengweiliu.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Design Patterns - Decorator Pattern"><meta property="og:description" content="Decorator Pattern 透過修改已定義的行為，以擴展或變更其功能，而不需透過繼承和覆寫。 使用組合 (composition) 替代繼承 (inherit)，可動態地添加或移除行為，且不需要在繼承關係中堆疊子類別。 Decorator模式更具靈活性和可維護性，因此被廣泛地應用於軟體開發領域中。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.zhengweiliu.com/posts/design-pattern/decorator-pattern/"><meta property="og:image" content="https://blog.zhengweiliu.com/mountain-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-01T22:40:29+08:00"><meta property="article:modified_time" content="2023-03-02T19:39:30+08:00"><meta property="og:site_name" content="ZhengWei Liu's blogs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.zhengweiliu.com/mountain-cover.png"><meta name=twitter:title content="Design Patterns - Decorator Pattern"><meta name=twitter:description content="Decorator Pattern 透過修改已定義的行為，以擴展或變更其功能，而不需透過繼承和覆寫。 使用組合 (composition) 替代繼承 (inherit)，可動態地添加或移除行為，且不需要在繼承關係中堆疊子類別。 Decorator模式更具靈活性和可維護性，因此被廣泛地應用於軟體開發領域中。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.zhengweiliu.com/posts/"},{"@type":"ListItem","position":2,"name":"Design Patterns - Decorator Pattern","item":"https://blog.zhengweiliu.com/posts/design-pattern/decorator-pattern/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Design Patterns - Decorator Pattern","name":"Design Patterns - Decorator Pattern","description":"Decorator Pattern 透過修改已定義的行為，以擴展或變更其功能，而不需透過繼承和覆寫。 使用組合 (composition) 替代繼承 (inherit)，可動態地添加或移除行為，且不需要在繼承關係中堆疊子類別。 Decorator模式更具靈活性和可維護性，因此被廣泛地應用於軟體開發領域中。","keywords":["Design Patterns","Decorator Pattern","設計模式"],"articleBody":"利用 Decorator Pattern - Design Patterns 學習設計模式 Decorator Pattern，並利用 Python 撰寫 sample code.\n摘要 Decorator Pattern 透過修改已定義的行為，以擴展或變更其功能，而不需透過繼承和覆寫。\n使用組合 (composition) 替代繼承 (inherit)，可動態地添加或移除行為，且不需要在繼承關係中堆疊子類別。\nDecorator模式更具靈活性和可維護性，因此被廣泛地應用於軟體開發領域中。\n繼承 (inherit) 架構面對的問題 假設當前的議題是 : 要在不同的渠道，如: Google Ads、 Meta Ads 或 Instagram，投放廣告 ， 需要建立特定的資料結構來處理廣告文案與投放渠道，並採用繼承的方式來建置資料模型，資料模型間的關係初步設計可能會如下圖所示\n建立一個 AdContent 並定義廣告內容的行為，為文字廣告和圖片廣告分別建立 TextAd 和 ImageAd 並讓兩者繼承 AdContent；\n同時，每個投放渠道對於廣告文案的限制可能有所不同，利用繼承建立不同渠道的類別，如: GoogleTextAd 、 LineTextAd、MetaImageAd…等等，透過覆寫來設定不同渠道的限制。\n基於上述設計的思考邏輯: 若後續迭代需求要求為 ImageAd 增加一個 split 的屬性，使得圖片廣告可用分割區塊的方式放入更多圖片，對已存在的 GoogleImageAd 、 MetaImageAd 和 InstagramImageAd 實現相關屬性的操作方式。\n顯而易見，AdContent 理應為 content 定一個泛用性較高的資料模型。然而，若當前的資料模型無法滿足新需求，則資料模型的調整也會影響整個繼承鏈上的類別。\n根本的問題在於採用繼承鏈的架構，當新需求只能適用於特定或部份渠道，卻要對繼承鏈上所有的類別進行調整；當繼承鏈過於龐大或負責的時候，會導致開發迭代版本需要更多的時間成本。\n用 Composition 替代 Inherit Decorator Pattern 則透過包裹 (wrapper) 方式來達成組合目的。\n因為 AdContent 提供對文案的操作行為，而投放渠道或是廣告類型 ，如:文字或圖片，對文案而言都是附加描述，因此可以將 AdContent 定義為最基礎的元件 (component) ；\n附加描述可以對元件的行為 (behavior) 或執行結果 (result)，做進一步的拓展、擴充或修改，因此將附加描述定義為 decorator 。 因 decorator 是獨立的，因此也可以被其他的 decorator 包覆。\n若 decorator 修改執行 behavior 的參數，或是修改了 behavior 的執行結果，則會依據 decorator 的包覆順序做出對應的改變 :\n若有多個 decorator 對同一個 behavior 的傳入參數進行修改，則傳入參數的改變會從 outer decorator 影響 inner decorator ，最終影響 component 執性 behavior 時的傳入參數\n若有多個 decorator 對同一個 behavior 的執行結果進行修改，則從 component 回傳的執行結果開始，由 inner decorator 的修改影響 outer decorator 的修改，直至最外層的 outer decorator 回覆執行結果。\n設計方法 依據先前的小節說明整理出幾點資訊\n需要定義出 元件 (component) 和 附加描述 (Decorator) 執行 behavior 是由外層 decorate 到內層 component ， behavior 的 signature 需統一，可判斷附加描述是元件的一種 (is-a) 附加描述可以疊加、 outer decorator 需要呼叫 inner decorator ，可判斷附加描述應具備 inner decorator 或 component (has-a) 再依據上述三點描述，以廣告文案投放至不同渠道的議題為例，用 Decorator Pattern 方式設計類別之間的關係，如下圖所示\n令 Decorator 繼承 Component 類，並在 Decorator 的建構方法傳入 component 實體 ( object | instance ) ， 使 decorator 具備包裹 (wrapper) 其他 decorator 和 component 的能力。\nDemo 用 Python 撰寫 Decorator Pattern 的示例。\nSource code\n以下分別提供了 4 種示例\n示例 1 Single decorator wrapped component\nprint(f'Example 1 - text ad decorator output:') print(TextAdsDecorator(text_ad).get_content()) print(f'Example 1 - image ad decorator output:') print(ImageAdsDecorator(image_ad).get_content()) 示例 2 Apply multiple decorators\nprint(f'Example 2 - Google Ads with text ad decorator output:') print(AdsChannelDecorator(TextAdsDecorator(text_ad), channel=\"Google Ads\").get_ad_channel()) print(f'Example 2 - Meta Ads with text ad decorator output:') print(AdsChannelDecorator(TextAdsDecorator(text_ad), channel=\"Meta Ads\").get_ad_channel()) 示例 3 Apply multiple decorators with different order\nprint(f'Example 3 - image ads decorator output:') print(AdsChannelDecorator(ImageAdsDecorator(image_ad), channel=\"Youtube Ads\").get_description()) print(f'Example 3 - exchange decorators output:') print(ImageAdsDecorator(AdsChannelDecorator(image_ad, channel=\"Instagram Ads\")).get_description()) 示例 4 Inherit decorator class to setting different behavior\nprint(f'Example 4 - inherit image ads decorator output:') google_image_ads = GoogleImageAdDecorator(AdsChannelDecorator(image_ad, channel='Google Ads')) # assume google image ads size limitation with: 320 \u003c= width \u003c= 1920, 480 \u003c= height \u003c= 1080 google_image_ads.width = 2560.0 google_image_ads.height = 1440.0 print(f'Over Google Image Ads size limitation') print(google_image_ads.get_description()) ","wordCount":"1302","inLanguage":"zh-tw","datePublished":"2023-03-01T22:40:29+08:00","dateModified":"2023-03-02T19:39:30+08:00","author":{"@type":"Person","name":"ZhengWei, Liu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zhengweiliu.com/posts/design-pattern/decorator-pattern/"},"publisher":{"@type":"Organization","name":"ZhengWei Liu's blogs","logo":{"@type":"ImageObject","url":"https://blog.zhengweiliu.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.zhengweiliu.com/ accesskey=h title="🏠 ZhengWei's Blog (Alt + H)"><img src=https://blog.zhengweiliu.com/apple-touch-icon.png alt aria-label=logo height=35>🏠 ZhengWei's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.zhengweiliu.com/search/ title="🔍 Search (Alt + /)" accesskey=/><span>🔍 Search</span></a></li><li><a href=https://blog.zhengweiliu.com/categories/ title="🏷️ Categories"><span>🏷️ Categories</span></a></li><li><a href=https://blog.zhengweiliu.com/archives/ title="📚 Archives"><span>📚 Archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.zhengweiliu.com/>首頁</a>&nbsp;»&nbsp;<a href=https://blog.zhengweiliu.com/posts/>Posts</a></div><h1 class=post-title>Design Patterns - Decorator Pattern</h1><div class=post-meta><span title='2023-03-01 22:40:29 +0800 CST'>March 1, 2023</span>&nbsp;·&nbsp;3 分鐘&nbsp;·&nbsp;1302 字&nbsp;·&nbsp;ZhengWei, Liu</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目錄</span></summary><div class=inner><ul><li><a href=#%e6%91%98%e8%a6%81 aria-label=摘要>摘要</a></li><li><a href=#%e7%b9%bc%e6%89%bf-inherit-%e6%9e%b6%e6%a7%8b%e9%9d%a2%e5%b0%8d%e7%9a%84%e5%95%8f%e9%a1%8c aria-label="繼承 (inherit) 架構面對的問題">繼承 (inherit) 架構面對的問題</a></li><li><a href=#%e7%94%a8-composition-%e6%9b%bf%e4%bb%a3-inherit aria-label="用 Composition 替代 Inherit">用 Composition 替代 Inherit</a></li><li><a href=#%e8%a8%ad%e8%a8%88%e6%96%b9%e6%b3%95 aria-label=設計方法>設計方法</a></li><li><a href=#demo aria-label=Demo>Demo</a><ul><li><a href=#%e7%a4%ba%e4%be%8b-1 aria-label="示例 1">示例 1</a></li><li><a href=#%e7%a4%ba%e4%be%8b-2 aria-label="示例 2">示例 2</a></li><li><a href=#%e7%a4%ba%e4%be%8b-3 aria-label="示例 3">示例 3</a></li><li><a href=#%e7%a4%ba%e4%be%8b-4 aria-label="示例 4">示例 4</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>利用 <a href="https://www.youtube.com/watch?v=GCraGHx6gso&list=PLrhzvIcii6GNjpARdnO4ueTUAVR9eMBpc&index=3">Decorator Pattern - Design Patterns</a> 學習設計模式 <strong>Decorator Pattern</strong>，並利用 Python 撰寫 sample code.</p><h2 id=摘要>摘要<a hidden class=anchor aria-hidden=true href=#摘要>#</a></h2><p>Decorator Pattern 透過修改已定義的行為，以擴展或變更其功能，而不需透過繼承和覆寫。</p><p>使用組合 (composition) 替代繼承 (inherit)，可動態地添加或移除行為，且不需要在繼承關係中堆疊子類別。</p><p>Decorator模式更具靈活性和可維護性，因此被廣泛地應用於軟體開發領域中。</p><h2 id=繼承-inherit-架構面對的問題>繼承 (inherit) 架構面對的問題<a hidden class=anchor aria-hidden=true href=#繼承-inherit-架構面對的問題>#</a></h2><p>假設當前的議題是 : 要在不同的渠道，如: Google Ads、 Meta Ads 或 Instagram，投放廣告 ， 需要建立特定的資料結構來處理廣告文案與投放渠道，並採用繼承的方式來建置資料模型，資料模型間的關係初步設計可能會如下圖所示</p><p><img loading=lazy src=/images/design-pattern/decorator-pattern/01_inherit.png alt></p><p>建立一個 AdContent 並定義廣告內容的行為，為文字廣告和圖片廣告分別建立 TextAd 和 ImageAd 並讓兩者繼承 AdContent；</p><p>同時，每個投放渠道對於廣告文案的限制可能有所不同，利用繼承建立不同渠道的類別，如: GoogleTextAd 、 LineTextAd、MetaImageAd&mldr;等等，透過覆寫來設定不同渠道的限制。</p><p>基於上述設計的思考邏輯:
若後續迭代需求要求為 ImageAd 增加一個 split 的屬性，使得圖片廣告可用分割區塊的方式放入更多圖片，對已存在的 GoogleImageAd 、 MetaImageAd 和 InstagramImageAd 實現相關屬性的操作方式。</p><p>顯而易見，AdContent 理應為 content 定一個泛用性較高的資料模型。然而，若當前的資料模型無法滿足新需求，則資料模型的調整也會影響整個繼承鏈上的類別。</p><p>根本的問題在於採用繼承鏈的架構，當新需求只能適用於特定或部份渠道，卻要對繼承鏈上所有的類別進行調整；當繼承鏈過於龐大或負責的時候，會導致開發迭代版本需要更多的時間成本。</p><h2 id=用-composition-替代-inherit>用 Composition 替代 Inherit<a hidden class=anchor aria-hidden=true href=#用-composition-替代-inherit>#</a></h2><p>Decorator Pattern 則透過包裹 (wrapper) 方式來達成組合目的。</p><p><img loading=lazy src=/images/design-pattern/decorator-pattern/02_decorators.png alt></p><p>因為 AdContent 提供對文案的操作行為，而投放渠道或是廣告類型 ，如:文字或圖片，對文案而言都是附加描述，因此可以將 AdContent 定義為最基礎的元件 (component) ；</p><p>附加描述可以對元件的行為 (behavior) 或執行結果 (result)，做進一步的拓展、擴充或修改，因此將附加描述定義為 decorator 。 因 decorator 是獨立的，因此也可以被其他的 decorator 包覆。</p><p>若 decorator 修改執行 behavior 的參數，或是修改了 behavior 的執行結果，則會依據 decorator 的包覆順序做出對應的改變 :</p><ul><li><p>若有多個 decorator 對同一個 behavior 的傳入參數進行修改，則傳入參數的改變會從 outer decorator 影響 inner decorator ，最終影響 component 執性 behavior 時的傳入參數</p></li><li><p>若有多個 decorator 對同一個 behavior 的執行結果進行修改，則從 component 回傳的執行結果開始，由 inner decorator 的修改影響 outer decorator 的修改，直至最外層的 outer decorator 回覆執行結果。</p></li></ul><h2 id=設計方法>設計方法<a hidden class=anchor aria-hidden=true href=#設計方法>#</a></h2><p>依據先前的小節說明整理出幾點資訊</p><ul><li>需要定義出 <strong>元件 (component)</strong> 和 <strong>附加描述 (Decorator)</strong></li><li>執行 behavior 是由外層 decorate 到內層 component ， behavior 的 signature 需統一，可判斷<strong>附加描述是元件的一種</strong> (is-a)</li><li>附加描述可以疊加、 outer decorator 需要呼叫 inner decorator ，可判斷<strong>附加描述應具備 inner decorator 或 component</strong> (has-a)</li></ul><p>再依據上述三點描述，以廣告文案投放至不同渠道的議題為例，用 Decorator Pattern 方式設計類別之間的關係，如下圖所示</p><p><img loading=lazy src=/images/design-pattern/decorator-pattern/03_design.png alt></p><p>令 Decorator 繼承 Component 類，並在 Decorator 的建構方法傳入 component 實體 ( object | instance ) ， 使 decorator 具備包裹 (wrapper) 其他 decorator 和 component 的能力。</p><h2 id=demo>Demo<a hidden class=anchor aria-hidden=true href=#demo>#</a></h2><p>用 Python 撰寫 Decorator Pattern 的示例。<br><a href=https://github.com/zhweiliu/design-pattern-study/blob/master/03_DecoratorPattern/Demo.py>Source code</a></p><p>以下分別提供了 4 種示例</p><h3 id=示例-1>示例 1<a hidden class=anchor aria-hidden=true href=#示例-1>#</a></h3><p><strong>Single decorator wrapped component</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Example 1 - text ad decorator output:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>TextAdsDecorator</span><span class=p>(</span><span class=n>text_ad</span><span class=p>)</span><span class=o>.</span><span class=n>get_content</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Example 1 - image ad decorator output:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>ImageAdsDecorator</span><span class=p>(</span><span class=n>image_ad</span><span class=p>)</span><span class=o>.</span><span class=n>get_content</span><span class=p>())</span>
</span></span></code></pre></div><p><img loading=lazy src=/images/design-pattern/decorator-pattern/04_demo_example_1.png alt></p><h3 id=示例-2>示例 2<a hidden class=anchor aria-hidden=true href=#示例-2>#</a></h3><p><strong>Apply multiple decorators</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Example 2 - Google Ads with text ad decorator output:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>AdsChannelDecorator</span><span class=p>(</span><span class=n>TextAdsDecorator</span><span class=p>(</span><span class=n>text_ad</span><span class=p>),</span> <span class=n>channel</span><span class=o>=</span><span class=s2>&#34;Google Ads&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>get_ad_channel</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Example 2 - Meta Ads with text ad decorator output:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>AdsChannelDecorator</span><span class=p>(</span><span class=n>TextAdsDecorator</span><span class=p>(</span><span class=n>text_ad</span><span class=p>),</span> <span class=n>channel</span><span class=o>=</span><span class=s2>&#34;Meta Ads&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>get_ad_channel</span><span class=p>())</span>
</span></span></code></pre></div><p><img loading=lazy src=/images/design-pattern/decorator-pattern/04_demo_example_2.png alt></p><h3 id=示例-3>示例 3<a hidden class=anchor aria-hidden=true href=#示例-3>#</a></h3><p><strong>Apply multiple decorators with different order</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Example 3 - image ads decorator output:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>AdsChannelDecorator</span><span class=p>(</span><span class=n>ImageAdsDecorator</span><span class=p>(</span><span class=n>image_ad</span><span class=p>),</span> <span class=n>channel</span><span class=o>=</span><span class=s2>&#34;Youtube Ads&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>get_description</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Example 3 - exchange decorators output:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>ImageAdsDecorator</span><span class=p>(</span><span class=n>AdsChannelDecorator</span><span class=p>(</span><span class=n>image_ad</span><span class=p>,</span> <span class=n>channel</span><span class=o>=</span><span class=s2>&#34;Instagram Ads&#34;</span><span class=p>))</span><span class=o>.</span><span class=n>get_description</span><span class=p>())</span>
</span></span></code></pre></div><p><img loading=lazy src=/images/design-pattern/decorator-pattern/04_demo_example_3.png alt></p><h3 id=示例-4>示例 4<a hidden class=anchor aria-hidden=true href=#示例-4>#</a></h3><p><strong>Inherit decorator class to setting different behavior</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Example 4 - inherit image ads decorator output:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>google_image_ads</span> <span class=o>=</span> <span class=n>GoogleImageAdDecorator</span><span class=p>(</span><span class=n>AdsChannelDecorator</span><span class=p>(</span><span class=n>image_ad</span><span class=p>,</span> <span class=n>channel</span><span class=o>=</span><span class=s1>&#39;Google Ads&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># assume google image ads size limitation with: 320 &lt;= width &lt;= 1920, 480 &lt;= height &lt;= 1080</span>
</span></span><span class=line><span class=cl><span class=n>google_image_ads</span><span class=o>.</span><span class=n>width</span> <span class=o>=</span> <span class=mf>2560.0</span>
</span></span><span class=line><span class=cl><span class=n>google_image_ads</span><span class=o>.</span><span class=n>height</span> <span class=o>=</span> <span class=mf>1440.0</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Over Google Image Ads size limitation&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>google_image_ads</span><span class=o>.</span><span class=n>get_description</span><span class=p>())</span>
</span></span></code></pre></div><p><img loading=lazy src=/images/design-pattern/decorator-pattern/04_demo_example_4.png alt></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://blog.zhengweiliu.com/posts/design-pattern/factory-method-pattern/><span class=title>« 上一頁</span><br><span>Design Patterns - Factory Method Pattern</span></a>
<a class=next href=https://blog.zhengweiliu.com/posts/design-pattern/observer-pattern/><span class=title>下一頁 »</span><br><span>Design Patterns - Observer Pattern</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Design Patterns - Decorator Pattern on twitter" href="https://twitter.com/intent/tweet/?text=Design%20Patterns%20-%20Decorator%20Pattern&url=https%3a%2f%2fblog.zhengweiliu.com%2fposts%2fdesign-pattern%2fdecorator-pattern%2f&hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Design Patterns - Decorator Pattern on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.zhengweiliu.com%2fposts%2fdesign-pattern%2fdecorator-pattern%2f&title=Design%20Patterns%20-%20Decorator%20Pattern&summary=Design%20Patterns%20-%20Decorator%20Pattern&source=https%3a%2f%2fblog.zhengweiliu.com%2fposts%2fdesign-pattern%2fdecorator-pattern%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Design Patterns - Decorator Pattern on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.zhengweiliu.com%2fposts%2fdesign-pattern%2fdecorator-pattern%2f&title=Design%20Patterns%20-%20Decorator%20Pattern"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Design Patterns - Decorator Pattern on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.zhengweiliu.com%2fposts%2fdesign-pattern%2fdecorator-pattern%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Design Patterns - Decorator Pattern on whatsapp" href="https://api.whatsapp.com/send?text=Design%20Patterns%20-%20Decorator%20Pattern%20-%20https%3a%2f%2fblog.zhengweiliu.com%2fposts%2fdesign-pattern%2fdecorator-pattern%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Design Patterns - Decorator Pattern on telegram" href="https://telegram.me/share/url?text=Design%20Patterns%20-%20Decorator%20Pattern&url=https%3a%2f%2fblog.zhengweiliu.com%2fposts%2fdesign-pattern%2fdecorator-pattern%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.zhengweiliu.com/>ZhengWei Liu's blogs</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="複製";function s(){t.innerHTML="已複製！",setTimeout(()=>{t.innerHTML="複製"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>